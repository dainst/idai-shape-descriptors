import { normalizeFourierDescriptor } from
    '../../../src/shape_descriptors/fourier_descriptors/fourier_descriptors_phase';
import * as tf from '@tensorflow/tfjs';

describe('Test normalizeFourierDescriptor', () => {
    const inArray = Array(81).fill(0).map((x, y) => x +
     y);
    const descriptor = tf.complex(inArray, inArray);

    it('Should return expected normalized descriptor', () => {
        const normalizedDescriptor = normalizeFourierDescriptor(descriptor);
        const decimals = 3;
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        const descriptorsRoundedString = Array.from(normalizedDescriptor.dataSync()).map((value: any) =>
                                                                                        value.toFixed(decimals));
        
        expect(descriptorsRoundedString).toEqual(expectedDescriptor.map(val => val.toFixed(decimals)));
    });
});


const expectedDescriptor = [
    0.0,
    0.014420894161290802,
    0.028121477111007803,
    0.041078331832337396,
    0.05326885838791984,
    0.06467129501904537,
    0.075264738550405,
    0.08502916408444752,
    0.09394544396991872,
    0.10199536602969309,
    0.10916165103355549,
    0.11542796940214547,
    0.12077895712884303,
    0.12520023090695076,
    0.12867840245011228,
    0.1312010919944992,
    0.1327569409719016,
    0.13333562384346737,
    0.13292785908445048,
    0.13152541931095624,
    0.12912114054029875,
    0.12570893057722465,
    0.12128377651890163,
    0.1158417513722137,
    0.10938001977756404,
    0.10189684283403788,
    0.09339158202144454,
    0.0838647022154177,
    0.07331777379242438,
    0.06175347382220214,
    0.04917558634581587,
    0.035589001738201786,
    0.020999715154737975,
    0.005414824062061729,
    -0.011157475145974094,
    -0.028707891445635736,
    -0.04722604439168743,
    -0.06670047023389786,
    -0.08711862893807876,
    -0.10846691210739662,
    -0.13073065179902393,
    0.8460358720808066,
    0.8696643142837134,
    0.8929410203897212,
    0.9158300456285937,
    0.9382956004775631,
    0.9603020833437532,
    0.9818141131684501,
    1.0027965619279982,
    1.023214587006134,
    1.0430336634126487,
    1.0622196158233352,
    1.0807386504162986,
    1.0985573864798033,
    1.1156428877669877,
    1.1319626935729128,
    1.1474848495095984,
    1.1621779379548753,
    1.176011108151099,
    1.1889541059299864,
    1.2009773030400823,
    1.212051726053617,
    1.222149084829788,
    1.2312418005118013,
    1.2393030330352937,
    1.2463067081261063,
    1.2522275437656951,
    1.2570410761028366,
    1.2607236847906487,
    1.2632526177283354,
    1.2646060151874616,
    1.264762933302989,
    1.263703366909721,
    1.2614082717052608,
    1.2578595857210417,
    1.253040250083454,
    1.2469342290475915,
    1.239526529286627,
    1.2308032184203421,
    1.220751442766864,
    1.2093594443021873,
    0.0,
    0.015116993053777344,
    0.030905099816882626,
    0.04733858532385931,
    0.06439098853437024,
    0.08203514664786787,
    0.10024322000667632,
    0.11898671756820664,
    0.13823652292660393,
    0.15796292086371513,
    0.17813562440887168,
    0.19872380238660112,
    0.21969610743101486,
    0.24102070444527107,
    0.26266529948417483,
    0.28459716903765797,
    0.30678318969258006,
    0.3291898681499999,
    0.3517833715748004,
    0.37452955825428985,
    0.39739400854216944,
    0.42034205606402886,
    0.4433388191603339,
    0.4663492325426772,
    0.48933807913889493,
    0.5122700221024993,
    0.5351096369617405,
    0.5578214438834939,
    0.5803699400270659,
    0.6027196319629358,
    0.6248350681313737,
    0.6466808713158422,
    0.6682217711060467,
    0.6894226363254986,
    0.7102485073984532,
    0.7306646286311165,
    0.7506364803820507,
    0.770129811096772,
    0.7891106691816141,
    0.8075454346920197,
    0.8254008508105428,
    -0.13399891809399955,
    -0.11681052073104248,
    -0.09858160642993125,
    -0.07931947811598666,
    -0.05903255548960934,
    -0.037730371614264124,
    -0.015423568584140679,
    0.007876107726635218,
    0.03215581383069249,
    0.05740161570677704,
    0.083598496787887,
    0.11073036685360377,
    0.1387800718213747,
    0.1677294044308354,
    0.19755911581459423,
    0.22824892794824486,
    0.2597775469717146,
    0.2921226773734085,
    0.3252610370279634,
    0.3591683730777847,
    0.39381947864791106,
    0.4291882103831204,
    0.4652475067955766,
    0.5019694074107006,
    0.5393250726983503,
    0.5772848047757964,
    0.6158180688683944,
    0.6548935155132808,
    0.6944790034908475,
    0.7345416234681985,
    0.7750477223382439,
    0.8159629282375447,
    0.8572521762255083,
    0.8988797346070166,
    0.9408092318800623,
    0.9830036842894895,
    1.0254255239674568,
    1.0680366276407725,
    1.1107983458848083,
    1.153671532903264,
    0.0,
    -0.014420894161290805,
    0.02812147711100782,
    -0.04107833183233742,
    0.0532688583879199,
    -0.0646712950190455,
    0.07526473855040504,
    -0.0850291640844479,
    0.093945443969919,
    -0.10199536602969322,
    0.1091616510335561,
    -0.11542796940214597,
    0.12077895712884329,
    -0.1252002309069508,
    0.12867840245011392,
    -0.13120109199450064,
    0.13275694097190285,
    -0.1333356238434683,
    0.13292785908445115,
    -0.13152541931095918,
    0.12912114054030144,
    -0.12570893057722407,
    0.12128377651890374,
    -0.11584175137221872,
    0.10938001977756528,
    -0.1018968428340423,
    0.09339158202144476,
    -0.08386470221542133,
    0.0733177737924316,
    -0.06175347382220464,
    0.049175586345822364,
    -0.03558900173820323,
    0.02099971515474336,
    -0.005414824062071444,
    -0.01115747514596993,
    0.02870789144562691,
    -0.04722604439168454,
    0.06670047023389025,
    -0.08711862893806621,
    0.1084669121073904,
    -0.1307306517990125,
    0.8460358720808083,
    -0.8696643142837143,
    0.8929410203897228,
    -0.9158300456285946,
    0.9382956004775633,
    -0.9603020833437538,
    0.9818141131684501,
    -1.002796561927998,
    1.0232145870061338,
    -1.0430336634126485,
    1.0622196158233346,
    -1.0807386504162981,
    1.0985573864798017,
    -1.1156428877669866,
    1.1319626935729126,
    -1.1474848495095966,
    1.162177937954875,
    -1.176011108151096,
    1.188954105929985,
    -1.2009773030400828,
    1.2120517260536143,
    -1.2221490848297847,
    1.2312418005118002,
    -1.2393030330352923,
    1.2463067081261041,
    -1.2522275437656922,
    1.2570410761028326,
    -1.2607236847906487,
    1.2632526177283345,
    -1.2646060151874599,
    1.2647629333029864,
    -1.2637033669097204,
    1.261408271705259,
    -1.2578595857210388,
    1.2530402500834534,
    -1.24693422904759,
    1.2395265292866262,
    -1.230803218420342,
    1.2207514427668633,
    -1.2093594443021871,
    0.0,
    -0.01511699305377734,
    0.03090509981688261,
    -0.0473385853238593,
    0.06439098853437018,
    -0.08203514664786776,
    0.10024322000667628,
    -0.11898671756820638,
    0.13823652292660374,
    -0.15796292086371505,
    0.17813562440887135,
    -0.19872380238660084,
    0.2196961074310147,
    -0.24102070444527104,
    0.262665299484174,
    -0.2845971690376573,
    0.30678318969257945,
    -0.3291898681499995,
    0.3517833715748001,
    -0.3745295582542888,
    0.39739400854216855,
    -0.42034205606402897,
    0.44333881916033335,
    -0.4663492325426759,
    0.4893380791388947,
    -0.5122700221024984,
    0.5351096369617405,
    -0.5578214438834933,
    0.580369940027065,
    -0.6027196319629355,
    0.6248350681313732,
    -0.6466808713158421,
    0.6682217711060465,
    -0.6894226363254985,
    0.7102485073984532,
    -0.7306646286311169,
    0.7506364803820508,
    -0.7701298110967727,
    0.7891106691816154,
    -0.8075454346920203,
    0.8254008508105448,
    -0.13399891809398784,
    0.11681052073103582,
    -0.09858160642991703,
    0.07931947811597762,
    -0.059032555489605676,
    0.03773037161425252,
    -0.01542356858413485,
    -0.007876107726649373,
    0.032155813830700763,
    -0.057401615706779374,
    0.08359849678789805,
    -0.11073036685360832,
    0.13878007182138835,
    -0.16772940443084267,
    0.19755911581459473,
    -0.22824892794825474,
    0.2597775469717175,
    -0.2921226773734212,
    0.32526103702796905,
    -0.35916837307778315,
    0.39381947864791933,
    -0.42918821038313015,
    0.4652475067955789,
    -0.5019694074107042,
    0.5393250726983554,
    -0.5772848047758028,
    0.6158180688684023,
    -0.6548935155132811,
    0.694479003490849,
    -0.7345416234682016,
    0.7750477223382484,
    -0.8159629282375458,
    0.8572521762255106,
    -0.8988797346070206,
    0.9408092318800629,
    -0.9830036842894916,
    1.0254255239674581,
    -1.0680366276407727,
    1.110798345884809,
    -1.1536715329032643,
];